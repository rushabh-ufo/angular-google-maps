{"version":3,"file":"agm-markerclusterer.js","sources":["../../../packages/markerclusterer/src/lib/services/managers/cluster-manager.ts","../../../packages/markerclusterer/src/lib/directives/marker-cluster.ts","../../../packages/markerclusterer/src/lib/marker-clusterer.module.ts","../../../packages/markerclusterer/src/public-api.ts","../../../packages/markerclusterer/src/agm-markerclusterer.ts"],"sourcesContent":["import { AgmMarker, GoogleMapsAPIWrapper, MarkerManager } from '@agm/core';\r\nimport { Injectable, NgZone } from '@angular/core';\r\nimport { MarkerClustererOptions } from '@google/markerclustererplus';\r\nimport MarkerClusterer from '@google/markerclustererplus';\r\nimport { Observable, Subscriber } from 'rxjs';\r\nimport { AgmMarkerCluster } from '../../directives/marker-cluster';\r\n\r\n@Injectable()\r\nexport class ClusterManager extends MarkerManager {\r\n  private _clustererInstance: Promise<MarkerClusterer>;\r\n  private _resolver: (cluster: MarkerClusterer) => void;\r\n\r\n  constructor(protected _mapsWrapper: GoogleMapsAPIWrapper, protected _zone: NgZone) {\r\n    super(_mapsWrapper, _zone);\r\n    this._clustererInstance = new Promise<MarkerClusterer>((resolver) => {\r\n      this._resolver = resolver;\r\n    });\r\n  }\r\n\r\n  init(options: MarkerClustererOptions): void {\r\n    this._mapsWrapper.getNativeMap().then(map => {\r\n      const clusterer = new MarkerClusterer(map, [], options);\r\n      this._resolver(clusterer);\r\n    });\r\n  }\r\n\r\n  getClustererInstance(): Promise<MarkerClusterer> {\r\n    return this._clustererInstance;\r\n  }\r\n\r\n  addMarker(markerDirective: AgmMarker): void {\r\n    const clusterPromise: Promise<MarkerClusterer> = this.getClustererInstance();\r\n    const markerPromise = this._mapsWrapper\r\n      .createMarker({\r\n        position: {\r\n          lat: markerDirective.latitude,\r\n          lng: markerDirective.longitude,\r\n        },\r\n        label: markerDirective.label,\r\n        draggable: markerDirective.draggable,\r\n        icon: markerDirective.iconUrl,\r\n        opacity: markerDirective.opacity,\r\n        visible: markerDirective.visible,\r\n        zIndex: markerDirective.zIndex,\r\n        title: markerDirective.title,\r\n        clickable: markerDirective.clickable,\r\n      }, false);\r\n\r\n    Promise\r\n      .all([clusterPromise, markerPromise])\r\n      .then(([cluster, marker]) => cluster.addMarker(marker));\r\n    this._markers.set(markerDirective, markerPromise);\r\n  }\r\n\r\n  deleteMarker(marker: AgmMarker): Promise<void> {\r\n    const markerPromise = this._markers.get(marker);\r\n    if (markerPromise == null) {\r\n      // marker already deleted\r\n      return Promise.resolve();\r\n    }\r\n    return markerPromise.then((m: google.maps.Marker) => {\r\n      this._zone.run(() => {\r\n        m.setMap(null);\r\n        this.getClustererInstance().then(cluster => {\r\n          cluster.removeMarker(m);\r\n          this._markers.delete(marker);\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  clearMarkers(): Promise<void> {\r\n    return this.getClustererInstance().then(cluster => {\r\n      cluster.clearMarkers();\r\n    });\r\n  }\r\n\r\n  setGridSize(c: AgmMarkerCluster): void {\r\n    this.getClustererInstance().then(cluster => {\r\n      cluster.setGridSize(c.gridSize);\r\n    });\r\n  }\r\n\r\n  setMaxZoom(c: AgmMarkerCluster): void {\r\n    this.getClustererInstance().then(cluster => {\r\n      cluster.setMaxZoom(c.maxZoom);\r\n    });\r\n  }\r\n\r\n  setStyles(c: AgmMarkerCluster): void {\r\n    this.getClustererInstance().then(cluster => {\r\n      cluster.setStyles(c.styles);\r\n    });\r\n  }\r\n\r\n  setZoomOnClick(c: AgmMarkerCluster): void {\r\n    this.getClustererInstance().then(cluster => {\r\n      if (c.zoomOnClick !== undefined) {\r\n        cluster.setZoomOnClick(c.zoomOnClick);\r\n      }\r\n    });\r\n  }\r\n\r\n  setAverageCenter(c: AgmMarkerCluster): void {\r\n    this.getClustererInstance().then(cluster => {\r\n      if (c.averageCenter !== undefined) {\r\n        cluster.setAverageCenter(c.averageCenter);\r\n      }\r\n    });\r\n  }\r\n\r\n  setImagePath(c: AgmMarkerCluster): void {\r\n    this.getClustererInstance().then(cluster => {\r\n      if (c.imagePath !== undefined) {\r\n        cluster.setImagePath(c.imagePath);\r\n      }\r\n    });\r\n  }\r\n\r\n  setMinimumClusterSize(c: AgmMarkerCluster): void {\r\n    this.getClustererInstance().then(cluster => {\r\n      if (c.minimumClusterSize !== undefined) {\r\n        cluster.setMinimumClusterSize(c.minimumClusterSize);\r\n      }\r\n    });\r\n  }\r\n\r\n  setImageExtension(c: AgmMarkerCluster): void {\r\n    this.getClustererInstance().then(cluster => {\r\n      if (c.imageExtension !== undefined) {\r\n        cluster.setImageExtension(c.imageExtension);\r\n      }\r\n    });\r\n  }\r\n\r\n  createClusterEventObservable<T>(eventName: string): Observable<T> {\r\n    return new Observable((subscriber: Subscriber<T>) => {\r\n      this._zone.runOutsideAngular(() => {\r\n        this._clustererInstance.then((m: MarkerClusterer) => {\r\n          m.addListener(eventName, (e: T) => this._zone.run(() => subscriber.next(e)));\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  setCalculator(c: AgmMarkerCluster): void {\r\n    this.getClustererInstance().then(cluster => {\r\n      if (typeof c.calculator === 'function') {\r\n        cluster.setCalculator(c.calculator);\r\n      }\r\n    });\r\n  }\r\n\r\n  async setClusterClass(c: AgmMarkerCluster) {\r\n    if (typeof c.clusterClass !== 'undefined') {\r\n      const instance = await this.getClustererInstance();\r\n      instance.setClusterClass(c.clusterClass);\r\n    }\r\n  }\r\n\r\n  async setEnableRetinaIcons(c: AgmMarkerCluster) {\r\n    if (typeof c.enableRetinaIcons !== 'undefined') {\r\n      const instance = await this.getClustererInstance();\r\n      instance.setEnableRetinaIcons(c.enableRetinaIcons);\r\n    }\r\n  }\r\n\r\n  async setIgnoreHidden(c: AgmMarkerCluster) {\r\n    if (typeof c.ignoreHidden !== 'undefined') {\r\n      const instance = await this.getClustererInstance();\r\n      instance.setIgnoreHidden(c.ignoreHidden);\r\n    }\r\n  }\r\n\r\n  async setImageSizes(c: AgmMarkerCluster) {\r\n    if (typeof c.imageSizes !== 'undefined') {\r\n      const instance = await this.getClustererInstance();\r\n      instance.setImageSizes(c.imageSizes);\r\n    }\r\n  }\r\n\r\n  async setTitle(c: AgmMarkerCluster) {\r\n    if (typeof c.title !== 'undefined') {\r\n      const instance = await this.getClustererInstance();\r\n      instance.setTitle(c.title);\r\n    }\r\n  }\r\n}\r\n","import { Directive, EventEmitter, Input, OnChanges, OnDestroy, OnInit, Output, SimpleChange } from '@angular/core';\r\n\r\nimport { Subscription } from 'rxjs';\r\n\r\nimport { InfoWindowManager, MarkerManager } from '@agm/core';\r\nimport { ClusterIconStyle, MarkerClustererOptions } from '@google/markerclustererplus';\r\nimport { Calculator } from '@google/markerclustererplus/dist/markerclusterer';\r\nimport { ClusterManager } from '../services/managers/cluster-manager';\r\n\r\n// tslint:disable: jsdoc-format\r\n/**\r\n * AgmMarkerCluster clusters map marker if they are near together\r\n *\r\n * ### Example\r\n```typescript\r\nimport { Component } from '@angular/core';\r\n\r\n@Component({\r\n selector: 'my-map-cmp',\r\n styles: [`\r\n   agm-map {\r\n     height: 300px;\r\n   }\r\n `],\r\n template: `\r\n   <agm-map [latitude]=\"lat\" [longitude]=\"lng\" [zoom]=\"zoom\">\r\n     <agm-marker-cluster>\r\n       <agm-marker [latitude]=\"lat\" [longitude]=\"lng\" [label]=\"'M'\">\r\n       </agm-marker>\r\n       <agm-marker [latitude]=\"lat2\" [longitude]=\"lng2\" [label]=\"'N'\">\r\n       </agm-marker>\r\n     </agm-marker-cluster>\r\n   </agm-map>\r\n `\r\n})\r\n```\r\n */\r\n// tslint:enable: jsdoc-format\r\n@Directive({\r\n  selector: 'agm-marker-cluster',\r\n  providers: [\r\n    ClusterManager,\r\n    { provide: MarkerManager, useExisting: ClusterManager },\r\n    InfoWindowManager,\r\n  ],\r\n})\r\nexport class AgmMarkerCluster implements OnDestroy, OnChanges, OnInit, MarkerClustererOptions {\r\n  /**\r\n   * The grid size of a cluster in pixels\r\n   */\r\n  @Input() gridSize: number;\r\n\r\n  /**\r\n   * The maximum zoom level that a marker can be part of a cluster.\r\n   */\r\n  @Input() maxZoom: number;\r\n\r\n  /**\r\n   * Whether the default behaviour of clicking on a cluster is to zoom into it.\r\n   */\r\n  @Input() zoomOnClick: boolean;\r\n\r\n  /**\r\n   * Whether the center of each cluster should be the average of all markers in the cluster.\r\n   */\r\n  @Input() averageCenter: boolean;\r\n\r\n  /**\r\n   * The minimum number of markers to be in a cluster before the markers are hidden and a count is shown.\r\n   */\r\n  @Input() minimumClusterSize: number;\r\n\r\n  /**\r\n   * An object that has style properties.\r\n   */\r\n  @Input() styles: ClusterIconStyle[];\r\n\r\n  /**\r\n   * A function that calculates the cluster style and text based on the markers in the cluster.\r\n   */\r\n  @Input() calculator: Calculator;\r\n\r\n  @Input() imagePath: string;\r\n  @Input() imageExtension: string;\r\n\r\n  /**\r\n   * The name of the CSS class defining general styles for the cluster markers.\r\n   * Use this class to define CSS styles that are not set up by the code that\r\n   * processes the `styles` array.\r\n   *\r\n   * @defaultValue 'cluster'\r\n   */\r\n  @Input() clusterClass: string;\r\n\r\n  /**\r\n   * Whether to allow the use of cluster icons that have sizes that are some\r\n   * multiple (typically double) of their actual display size. Icons such as\r\n   * these look better when viewed on high-resolution monitors such as Apple's\r\n   * Retina displays. Note: if this property is `true`, sprites cannot be used\r\n   * as cluster icons.\r\n   *\r\n   * @defaultValue false\r\n   */\r\n  @Input() enableRetinaIcons: boolean;\r\n\r\n  /**\r\n   * Whether to ignore hidden markers in clusters. You may want to set this to\r\n   * `true` to ensure that hidden markers are not included in the marker count\r\n   * that appears on a cluster marker (this count is the value of the `text`\r\n   * property of the result returned by the default `calculator`). If set to\r\n   * `true` and you change the visibility of a marker being clustered, be sure\r\n   * to also call `MarkerClusterer.repaint()`.\r\n   *\r\n   * @defaultValue false\r\n   */\r\n  @Input() ignoreHidden: boolean;\r\n\r\n  /**\r\n   * An array of numbers containing the widths of the group of\r\n   * `<imagePath><n>.<imageExtension>` image files. (The images are assumed to\r\n   * be square.)\r\n   *\r\n   * @defaultValue [53, 56, 66, 78, 90]\r\n   */\r\n  @Input() imageSizes: number[];\r\n\r\n  /**\r\n   * The tooltip to display when the mouse moves over a cluster marker.\r\n   * (Alternatively, you can use a custom `calculator` function to specify a\r\n   * different tooltip for each cluster marker.)\r\n   *\r\n   * @defaultValue ''\r\n   */\r\n  @Input() title: string;\r\n\r\n  @Output() clusterClick: EventEmitter<void> = new EventEmitter<void>();\r\n\r\n  private _observableSubscriptions: Subscription[] = [];\r\n\r\n  constructor(private _clusterManager: ClusterManager) { }\r\n\r\n  /** @internal */\r\n  ngOnDestroy() {\r\n    this._clusterManager.clearMarkers();\r\n    this._observableSubscriptions.forEach((s) => s.unsubscribe());\r\n  }\r\n\r\n  /** @internal */\r\n  ngOnChanges(changes: { [key: string]: SimpleChange }) {\r\n    // tslint:disable: no-string-literal\r\n    if (changes['gridSize']) {\r\n      this._clusterManager.setGridSize(this);\r\n    }\r\n    if (changes['maxZoom']) {\r\n      this._clusterManager.setMaxZoom(this);\r\n    }\r\n    if (changes['zoomOnClick']) {\r\n      this._clusterManager.setZoomOnClick(this);\r\n    }\r\n    if (changes['averageCenter']) {\r\n      this._clusterManager.setAverageCenter(this);\r\n    }\r\n    if (changes['minimumClusterSize']) {\r\n      this._clusterManager.setMinimumClusterSize(this);\r\n    }\r\n    if (changes['imagePath']) {\r\n      this._clusterManager.setImagePath(this);\r\n    }\r\n    if (changes['imageExtension']) {\r\n      this._clusterManager.setImageExtension(this);\r\n    }\r\n    if (changes['calculator']) {\r\n      this._clusterManager.setCalculator(this);\r\n    }\r\n    if (changes['styles']) {\r\n      this._clusterManager.setStyles(this);\r\n    }\r\n    if (changes['clusterClass']) {\r\n      this._clusterManager.setClusterClass(this);\r\n    }\r\n    if (changes['enableRetinaIcons']) {\r\n      this._clusterManager.setEnableRetinaIcons(this);\r\n    }\r\n    if (changes['ignoreHidden']) {\r\n      this._clusterManager.setIgnoreHidden(this);\r\n    }\r\n    if (changes['imageSizes']) {\r\n      this._clusterManager.setImageSizes(this);\r\n    }\r\n    if (changes['title']) {\r\n      this._clusterManager.setTitle(this);\r\n    }\r\n    // tslint:enable: no-string-literal\r\n\r\n  }\r\n\r\n  private _addEventListeners() {\r\n    const handlers = [\r\n      {\r\n        name: 'clusterclick',\r\n        handler: () => this.clusterClick.emit(),\r\n      },\r\n    ];\r\n    handlers.forEach((obj) => {\r\n      const os = this._clusterManager.createClusterEventObservable(obj.name).subscribe(obj.handler);\r\n      this._observableSubscriptions.push(os);\r\n    });\r\n  }\r\n\r\n  /** @internal */\r\n  ngOnInit() {\r\n    this._addEventListeners();\r\n    this._clusterManager.init({\r\n      averageCenter: this.averageCenter,\r\n      calculator: this.calculator,\r\n      clusterClass: this.clusterClass,\r\n      enableRetinaIcons: this.enableRetinaIcons,\r\n      gridSize: this.gridSize,\r\n      ignoreHidden: this.ignoreHidden,\r\n      imageExtension: this.imageExtension,\r\n      imagePath: this.imagePath,\r\n      imageSizes: this.imageSizes,\r\n      maxZoom: this.maxZoom,\r\n      minimumClusterSize: this.minimumClusterSize,\r\n      styles: this.styles,\r\n      title: this.title,\r\n      zoomOnClick: this.zoomOnClick,\r\n    });\r\n  }\r\n}\r\n","import { AgmCoreModule } from '@agm/core';\r\nimport { NgModule } from '@angular/core';\r\nimport { AgmMarkerCluster } from './directives/marker-cluster';\r\n\r\n@NgModule({\r\n  imports: [AgmCoreModule],\r\n  declarations: [AgmMarkerCluster],\r\n  exports: [AgmMarkerCluster],\r\n})\r\nexport class AgmMarkerClustererModule {\r\n}\r\n","/*\r\n * Public API Surface of markerclusterer\r\n */\r\n\r\nexport * from './lib/services';\r\nexport * from './lib/directives';\r\nexport * from './lib/marker-clusterer.module';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}